{
    "body": "On Friday 07 May 2010 08:22:00 deloptes wrote: \n> Jozsi Vadkan wrote: \n> > Did anyone managed to boot from RAID1? \n> > \n> > Lenny gives this error message: \n> > \n> > \"mdadm: no devices found for /dev/md0\" \n> > \n \n> You'll need a small i.e. 20-30MB partition out of raid to boot from with \n> i.e. initrd which loads the md driver and your raid device becomes visible. \n \n  Just for the record, it actually *is* possible to boot off a partition \nthat's in RAID1, but you might have to use grub.  The reason it works \nis because grub can read past the md-raid1 metadata without getting \nconfused -- since the raid is not running when grub is looking at the \ndisks, it only sees one of the two, but since they're mirrored, and \nsince grub doesn't *write* to the partition, everything works. \n \n  I have several production systems that do this. \n \n  It's a bit complicated to set up, but generally, it goes \nsomething like: \n \n  - Install a basic system onto one drive, with the correct \n      size of partition (call this /dev/sda1). \n  - Set up an \"incomplete\" RAID1 array, with one device and \n      one missing, with the second drive -- this is /dev/md0, \n      consisting of /dev/sdb1 and an empty slot. \n  - Configure /etc/mdadm/mdadm.conf, and re-build your initramfs \n      so that it has the md modules and knows about the array. \n  - Mount /dev/md0 somewhere and copy all the data off /dev/sda1 to it. \n      It's very important to get the *new* initramfs onto the array. \n  - Install grub in the bootloader of the 2nd drive. (The installer \n      already did this for the first one). This actually isn't \n      essential, but you may need it if/when /dev/sda fails. \n  - Boot on to the incomplete RAID array -- root=/dev/md0. \n  - Add /dev/sda1 to the array, and sync. \n \n  Now you have a bootable software raid-1 system. \n \n  I'm not saying this solves the OP's problem, necessarily, \nbut it's perfectly possible.  I've never tried it with LILO \nor grub2, but I would think it would work. \n \n                                -- A. \n-- \nAndrew Reid / reidac@bellatlantic.net \n \n \n-- \nTo UNSUBSCRIBE, email to debian-user-REQUEST@lists.debian.org \nwith a subject of \"unsubscribe\". Trouble? Contact listmaster@lists.debian.org \nArchive: http://lists.debian.org/201005071303.20994.reidac@bellatlantic.net", 
    "to": [
        "debian-user@lists.debian.org"
    ], 
    "is_spam": false, 
    "from": "Andrew Reid <reidac@bellatlantic.net>", 
    "subject": "Re: usb raid1 pendrive boot"
}